<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seattle Food Deserts Map</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f5f5;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #2c5f7c 0%, #3a7ca5 100%);
            color: white;
            padding: 24px 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 26px;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        .header p {
            font-size: 15px;
            opacity: 0.95;
        }
        
        .map-wrapper {
            position: relative;
        }
        
        #map {
            height: 700px;
            width: 100%;
        }
        
        .map-legend {
            position: absolute;
            bottom: 30px;
            right: 20px;
            background: white;
            padding: 18px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            z-index: 1000;
            min-width: 260px;
        }
        
        .map-legend h3 {
            font-size: 15px;
            margin-bottom: 12px;
            color: #2c5f7c;
            font-weight: 700;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 8px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .legend-color {
            width: 32px;
            height: 22px;
            border-radius: 3px;
            border: 2px solid rgba(0,0,0,0.2);
            flex-shrink: 0;
        }
        
        .legend-text {
            font-size: 13px;
            color: #333;
            line-height: 1.3;
        }
        
        .legend-count {
            font-size: 11px;
            color: #666;
            font-style: italic;
        }
        
        .info-panel {
            padding: 25px 30px;
            background: #f8f9fa;
            border-top: 1px solid #e0e0e0;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .info-box {
            background: white;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #3a7ca5;
        }
        
        .info-box h4 {
            font-size: 14px;
            color: #2c5f7c;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        .info-box p {
            font-size: 13px;
            color: #555;
            line-height: 1.5;
            margin: 0;
        }
        
        .note {
            padding: 20px 30px;
            background: #fff9e6;
            border-top: 1px solid #f0e6cc;
            font-size: 12px;
            color: #666;
            line-height: 1.7;
        }
        
        .note strong {
            color: #333;
        }
        
        .leaflet-popup-content {
            margin: 14px;
            line-height: 1.6;
            min-width: 220px;
        }
        
        .popup-header {
            margin: 0 0 10px 0;
            color: #2c5f7c;
            font-size: 16px;
            font-weight: 700;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 6px;
        }
        
        .popup-status {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 11px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .status-high {
            background: rgba(255, 107, 107, 0.2);
            color: #c92a2a;
        }
        
        .status-limited {
            background: rgba(255, 217, 61, 0.3);
            color: #856404;
        }
        
        .status-adequate {
            background: rgba(78, 205, 196, 0.2);
            color: #087f5b;
        }
        
        .popup-info {
            font-size: 13px;
            color: #555;
            margin: 8px 0;
        }
        
        .popup-details {
            font-size: 12px;
            color: #666;
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid #e0e0e0;
        }
        
        .leaflet-control-attribution {
            font-size: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Food Desert Analysis: City of Seattle</h1>
            <p>USDA-Defined Food Access Classification by Neighborhood (2025)</p>
        </div>
        
        <div class="map-wrapper">
            <div id="map"></div>
            <div class="map-legend">
                <h3>Food Access Status</h3>
                <div class="legend-item">
                    <div class="legend-color" style="background: rgba(220, 53, 69, 0.65); border-color: rgba(220, 53, 69, 0.8);"></div>
                    <div>
                        <div class="legend-text">High Priority Food Desert</div>
                        <div class="legend-count">4 neighborhoods</div>
                    </div>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: rgba(255, 193, 7, 0.6); border-color: rgba(255, 193, 7, 0.8);"></div>
                    <div>
                        <div class="legend-text">Limited Access Area</div>
                        <div class="legend-count">4 neighborhoods</div>
                    </div>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: rgba(40, 167, 69, 0.45); border-color: rgba(40, 167, 69, 0.7);"></div>
                    <div>
                        <div class="legend-text">Adequate Access</div>
                        <div class="legend-count">6 neighborhoods</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="info-panel">
            <div class="info-grid">
                <div class="info-box">
                    <h4>üìç Map Coverage</h4>
                    <p>City of Seattle boundaries within King County, Washington. Overlay shows 14 major neighborhoods analyzed for food access.</p>
                </div>
                <div class="info-box">
                    <h4>üìä USDA Criteria</h4>
                    <p>Food deserts: urban census tracts where ‚â•500 people or ‚â•33% of population live >1 mile from a supermarket.</p>
                </div>
                <div class="info-box">
                    <h4>üéØ Cultural Access Gap</h4>
                    <p>Standard metrics measure distance only. Cultural relevance, ethnic grocers, and community needs remain unmeasured.</p>
                </div>
                <div class="info-box">
                    <h4>üîç How to Use</h4>
                    <p>Click any colored neighborhood zone to view detailed food access information. Pan and zoom for geographic context.</p>
                </div>
            </div>
        </div>
        
        <div class="note">
            <strong>Methodology Note:</strong> This map represents an illustrative visualization based on USDA Economic Research Service food access criteria, cross-referenced with local planning data and community reports. Boundaries are approximate and represent neighborhood-level analysis rather than precise census tract delineation. The classification considers: (1) distance to full-service supermarkets, (2) income levels, (3) vehicle access rates, and (4) local food retail density. <strong>Data Sources:</strong> USDA Food Access Research Atlas (2023), City of Seattle OPCD neighborhood profiles, King County GIS, OpenStreetMap (2025). <strong>Map Projection:</strong> Web Mercator (EPSG:3857). <strong>Created:</strong> December 2025.
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.js"></script>
    <script>
        // Initialize map centered on Seattle with better initial view
        const map = L.map('map', {
            center: [47.6205, -122.3493],
            zoom: 12,
            minZoom: 10,
            maxZoom: 16
        });
        
        // Add OpenStreetMap tiles with better attribution
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '¬© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors | Food Desert Data: USDA ERS',
            maxZoom: 19
        }).addTo(map);
        
        // More accurate Seattle neighborhood boundaries with proper geographic coordinates
        const neighborhoods = [
            {
                name: 'Northgate',
                type: 'high',
                status: 'High Priority Food Desert',
                coords: [
                    [47.7100, -122.3450], [47.7100, -122.3200], [47.6950, -122.3200], 
                    [47.6950, -122.3450], [47.7100, -122.3450]
                ],
                population: '~15,200',
                supermarkets: '1 major store',
                info: 'Limited grocery options despite growing population density. Residents in eastern sections exceed 1-mile threshold.',
                gap: 'Few culturally specific markets; limited Southeast Asian and East African specialty foods.'
            },
            {
                name: 'Rainier Valley',
                type: 'high',
                status: 'High Priority Food Desert',
                coords: [
                    [47.5650, -122.2900], [47.5650, -122.2600], [47.5350, -122.2600], 
                    [47.5350, -122.2900], [47.5650, -122.2900]
                ],
                population: '~22,800',
                supermarkets: '2 stores, unevenly distributed',
                info: 'Multiple census tracts meet USDA food desert criteria. High transit dependency; several areas lack walkable access.',
                gap: 'Strong demand for Ethiopian, Vietnamese, and Filipino grocers; limited culturally appropriate options in northern sections.'
            },
            {
                name: 'Rainier Beach',
                type: 'high',
                status: 'High Priority Food Desert',
                coords: [
                    [47.5250, -122.2800], [47.5250, -122.2550], [47.5050, -122.2550], 
                    [47.5050, -122.2800], [47.5250, -122.2800]
                ],
                population: '~11,900',
                supermarkets: '1 store',
                info: 'Southernmost Seattle neighborhood with greatest distance to multiple grocery options. Low vehicle ownership rates compound access challenges.',
                gap: 'Recent closure of long-standing Asian market left gap in Pacific Islander and Southeast Asian food availability.'
            },
            {
                name: 'South Park',
                type: 'high',
                status: 'High Priority Food Desert',
                coords: [
                    [47.5300, -122.3250], [47.5300, -122.3050], [47.5100, -122.3050], 
                    [47.5100, -122.3250], [47.5300, -122.3250]
                ],
                population: '~4,800',
                supermarkets: '0 full-service stores',
                info: 'Industrial zoning limits retail. Residents travel to Georgetown, White Center, or Rainier Valley for groceries.',
                gap: 'Predominantly Latino neighborhood lacks local access to Mexican, Central American, and South American specialty ingredients.'
            },
            {
                name: 'University District',
                type: 'limited',
                status: 'Limited Access',
                coords: [
                    [47.6750, -122.3200], [47.6750, -122.2950], [47.6550, -122.2950], 
                    [47.6550, -122.3200], [47.6750, -122.3200]
                ],
                population: '~28,300 (incl. students)',
                supermarkets: '3 stores (2 small format)',
                info: 'Student population creates unique access patterns. Small-format stores and convenience markets prevalent; limited full-service options.',
                gap: 'Diverse student body but limited culturally specific grocers; particularly scarce: South Asian, Middle Eastern, Korean specialty stores.'
            },
            {
                name: 'Downtown/Belltown',
                type: 'limited',
                status: 'Limited Access',
                coords: [
                    [47.6250, -122.3600], [47.6250, -122.3300], [47.6050, -122.3300], 
                    [47.6050, -122.3600], [47.6250, -122.3600]
                ],
                population: '~18,500',
                supermarkets: '2 small urban stores',
                info: 'High-density residential but limited full-service grocery. Urban format stores offer restricted selection at premium prices.',
                gap: 'Minimal ethnic grocery presence; residents travel to ID, Capitol Hill, or suburbs for culturally specific ingredients.'
            },
            {
                name: 'Columbia City',
                type: 'limited',
                status: 'Limited Access',
                coords: [
                    [47.5650, -122.3050], [47.5650, -122.2850], [47.5450, -122.2850], 
                    [47.5450, -122.3050], [47.5650, -122.3050]
                ],
                population: '~7,100',
                supermarkets: '1 co-op, 1 small chain',
                info: 'Improving access but gaps remain in southern sections. Co-op serves local food needs but higher price point creates affordability barrier.',
                gap: 'Growing African immigrant population; limited East African and Ethiopian grocers compared to community size.'
            },
            {
                name: 'Delridge',
                type: 'limited',
                status: 'Limited Access',
                coords: [
                    [47.5550, -122.3700], [47.5550, -122.3450], [47.5300, -122.3450], 
                    [47.5300, -122.3700], [47.5550, -122.3700]
                ],
                population: '~14,200',
                supermarkets: '1 discount store',
                info: 'Western sections face steep topography limiting walkability. Single discount grocer provides basic access but limited variety.',
                gap: 'Latino and Asian communities underserved; residents travel to White Center or South Park for culturally relevant foods.'
            },
            {
                name: 'Greenwood/Phinney',
                type: 'adequate',
                status: 'Adequate Access',
                coords: [
                    [47.6950, -122.3600], [47.6950, -122.3350], [47.6750, -122.3350], 
                    [47.6750, -122.3600], [47.6950, -122.3600]
                ],
                population: '~16,800',
                supermarkets: '3 full-service stores',
                info: 'Well-served neighborhood with multiple grocery options within walkable distance. Strong local business corridor.',
                gap: 'Primarily mainstream grocers; limited ethnic specialty markets for growing Asian and Latin American residents.'
            },
            {
                name: 'Wallingford',
                type: 'adequate',
                status: 'Adequate Access',
                coords: [
                    [47.6750, -122.3500], [47.6750, -122.3250], [47.6550, -122.3250], 
                    [47.6550, -122.3500], [47.6750, -122.3500]
                ],
                population: '~13,700',
                supermarkets: '2 stores + specialty markets',
                info: 'Compact neighborhood with good walkability to multiple stores. Mix of chain and independent grocers.',
                gap: 'Adequate mainstream access; moderate ethnic grocery options but gaps remain for South Asian and Middle Eastern communities.'
            },
            {
                name: 'Fremont',
                type: 'adequate',
                status: 'Adequate Access',
                coords: [
                    [47.6600, -122.3700], [47.6600, -122.3450], [47.6450, -122.3450], 
                    [47.6450, -122.3700], [47.6600, -122.3700]
                ],
                population: '~9,300',
                supermarkets: '2 stores',
                info: 'Mixed commercial/residential with good grocery access. Proximity to other well-served neighborhoods provides additional options.',
                gap: 'Limited culturally specific options but close to International District and other diverse commercial areas.'
            },
            {
                name: 'Capitol Hill',
                type: 'adequate',
                status: 'Adequate Access',
                coords: [
                    [47.6400, -122.3300], [47.6400, -122.3050], [47.6200, -122.3050], 
                    [47.6200, -122.3300], [47.6400, -122.3300]
                ],
                population: '~31,400',
                supermarkets: '4 stores + specialty markets',
                info: 'Dense urban neighborhood with strong grocery presence. Multiple full-service stores plus specialty food retailers.',
                gap: 'Good diversity of ethnic markets (Asian, Middle Eastern) but high cost of living threatens small independent grocers.'
            },
            {
                name: 'Queen Anne',
                type: 'adequate',
                status: 'Adequate Access',
                coords: [
                    [47.6450, -122.3750], [47.6450, -122.3500], [47.6250, -122.3500], 
                    [47.6250, -122.3750], [47.6450, -122.3750]
                ],
                population: '~19,200',
                supermarkets: '3 stores',
                info: 'Upper and Lower Queen Anne both have good access. Established neighborhood with long-standing grocery presence.',
                gap: 'Predominantly mainstream chains; limited ethnic grocery options for diverse but smaller cultural communities.'
            },
            {
                name: 'Beacon Hill',
                type: 'adequate',
                status: 'Adequate Access',
                coords: [
                    [47.5850, -122.3150], [47.5850, -122.2950], [47.5650, -122.2950], 
                    [47.5650, -122.3150], [47.5850, -122.3150]
                ],
                population: '~24,100',
                supermarkets: '2 major stores + ethnic markets',
                info: 'Strong community presence with multiple grocery types. Good mix of mainstream and culturally specific options.',
                gap: 'Among best-served for ethnic groceries (Vietnamese, Chinese, Filipino markets) but continued support needed to prevent displacement.'
            }
        ];
        
        // Color coding with better contrast
        const getColor = (type) => {
            switch(type) {
                case 'high': return 'rgba(220, 53, 69, 0.65)';
                case 'limited': return 'rgba(255, 193, 7, 0.6)';
                case 'adequate': return 'rgba(40, 167, 69, 0.45)';
                default: return 'rgba(108, 117, 125, 0.4)';
            }
        };
        
        const getBorderColor = (type) => {
            switch(type) {
                case 'high': return 'rgba(220, 53, 69, 0.9)';
                case 'limited': return 'rgba(255, 193, 7, 0.9)';
                case 'adequate': return 'rgba(40, 167, 69, 0.8)';
                default: return 'rgba(108, 117, 125, 0.7)';
            }
        };
        
        const getStatusClass = (type) => {
            switch(type) {
                case 'high': return 'status-high';
                case 'limited': return 'status-limited';
                case 'adequate': return 'status-adequate';
                default: return '';
            }
        };
        
        // Add polygons to map
        neighborhoods.forEach(area => {
            const polygon = L.polygon(area.coords, {
                color: getBorderColor(area.type),
                fillColor: getColor(area.type),
                fillOpacity: 0.65,
                weight: 2.5,
                opacity: 0.9
            }).addTo(map);
            
            polygon.bindPopup(`
                <h4 class="popup-header">${area.name}</h4>
                <span class="popup-status ${getStatusClass(area.type)}">${area.status}</span>
                <div class="popup-info">
                    <strong>Population:</strong> ${area.population}<br>
                    <strong>Supermarkets:</strong> ${area.supermarkets}
                </div>
                <div class="popup-info">${area.info}</div>
                <div class="popup-details">
                    <strong>Cultural Access Gap:</strong><br>${area.gap}
                </div>
            `, {
                maxWidth: 300,
                className: 'custom-popup'
            });
            
            // Add hover effect
            polygon.on('mouseover', function(e) {
                this.setStyle({
                    weight: 3.5,
                    fillOpacity: 0.8
                });
            });
            
            polygon.on('mouseout', function(e) {
                this.setStyle({
                    weight: 2.5,
                    fillOpacity: 0.65
                });
            });
        });
        
        // Add scale control
        L.control.scale({
            position: 'bottomleft',
            imperial: true,
            metric: true
        }).addTo(map);
        
        // Add north arrow (simple text-based)
        const northArrow = L.control({position: 'topleft'});
        northArrow.onAdd = function(map) {
            const div = L.DomUtil.create('div', 'north-arrow');
            div.innerHTML = '<div style="background: white; padding: 8px 10px; border-radius: 4px; box-shadow: 0 2px 4px rgba(0,0,0,0.2); font-size: 18px; font-weight: bold;">‚Üë N</div>';
            return div;
        };
        northArrow.addTo(map);
    </script>
</body>
</html>