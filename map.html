<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seattle Food Deserts Map</title>

    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f5f5;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c5f7c 0%, #3a7ca5 100%);
            color: white;
            padding: 24px 30px;
            text-align: center;
        }

        .map-wrapper {
            position: relative;
        }

        #map {
            width: 100%;
            height: 700px;
            min-height: 700px;
            display: block;
            background: #ddd;
        }

        .map-legend {
            position: absolute;
            bottom: 30px;
            right: 20px;
            background: white;
            padding: 18px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            z-index: 1000;
            min-width: 260px;
        }

        .popup-header {
            margin: 0 0 10px 0;
            color: #2c5f7c;
            font-size: 16px;
            font-weight: 700;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 6px;
        }

        .popup-status {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 11px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .status-high {
            background: rgba(255, 107, 107, 0.2);
            color: #c92a2a;
        }

        .status-limited {
            background: rgba(255, 217, 61, 0.3);
            color: #856404;
        }

        .status-adequate {
            background: rgba(78, 205, 196, 0.2);
            color: #087f5b;
        }

        .popup-info {
            font-size: 13px;
            color: #555;
            margin: 8px 0;
        }

        .popup-details {
            font-size: 12px;
            color: #666;
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid #e0e0e0;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>Food Desert Analysis: City of Seattle</h1>
            <p>USDA-Defined Food Access Classification by Neighborhood (2025)</p>
        </div>

        <div class="map-wrapper">
            <div id="map"></div>

            <div class="map-legend">
                <h3>Food Access Status</h3>
                <div>High Priority Food Desert</div>
                <div>Limited Access</div>
                <div>Adequate Access</div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

    <script>
        const map = L.map('map', {
            center: [47.6205, -122.3493],
            zoom: 12
        });

        L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: 'Â© OpenStreetMap contributors'
        }).addTo(map);

        const neighborhoods = [
            {
                name: 'Northgate',
                type: 'high',
                status: 'High Priority Food Desert',
                coords: [
                    [47.7100, -122.3450],
                    [47.7100, -122.3200],
                    [47.6950, -122.3200],
                    [47.6950, -122.3450]
                ],
                population: '~15,200',
                supermarkets: '1 major store',
                info: 'Limited grocery options despite growing population density.',
                gap: 'Few culturally specific markets.'
            },
            {
                name: 'Rainier Valley',
                type: 'high',
                status: 'High Priority Food Desert',
                coords: [
                    [47.5650, -122.2900],
                    [47.5650, -122.2600],
                    [47.5350, -122.2600],
                    [47.5350, -122.2900]
                ],
                population: '~22,800',
                supermarkets: '2 stores',
                info: 'Several census tracts meet USDA food desert criteria.',
                gap: 'Limited culturally appropriate options.'
            },
            {
                name: 'Rainier Beach',
                type: 'high',
                status: 'High Priority Food Desert',
                coords: [
                    [47.5250, -122.2800],
                    [47.5250, -122.2550],
                    [47.5050, -122.2550],
                    [47.5050, -122.2800]
                ],
                population: '~11,900',
                supermarkets: '1 store',
                info: 'Low vehicle ownership increases access challenges.',
                gap: 'Recent closure of Asian market left gaps.'
            },
            {
                name: 'South Park',
                type: 'high',
                status: 'High Priority Food Desert',
                coords: [
                    [47.5300, -122.3250],
                    [47.5300, -122.3050],
                    [47.5100, -122.3050],
                    [47.5100, -122.3250]
                ],
                population: '~4,800',
                supermarkets: '0 full-service stores',
                info: 'Industrial zoning limits retail.',
                gap: 'Lacks culturally relevant Latino markets.'
            },
            {
                name: 'University District',
                type: 'limited',
                status: 'Limited Access',
                coords: [
                    [47.6750, -122.3200],
                    [47.6750, -122.2950],
                    [47.6550, -122.2950],
                    [47.6550, -122.3200]
                ],
                population: '~28,300',
                supermarkets: '3 stores',
                info: 'Student population creates unique access patterns.',
                gap: 'Few culturally specific grocers.'
            },
            {
                name: 'Downtown/Belltown',
                type: 'limited',
                status: 'Limited Access',
                coords: [
                    [47.6250, -122.3600],
                    [47.6250, -122.3300],
                    [47.6050, -122.3300],
                    [47.6050, -122.3600]
                ],
                population: '~18,500',
                supermarkets: '2 urban stores',
                info: 'Urban-format stores offer limited selection.',
                gap: 'Minimal ethnic grocery presence.'
            },
            {
                name: 'Columbia City',
                type: 'limited',
                status: 'Limited Access',
                coords: [
                    [47.5650, -122.3050],
                    [47.5650, -122.2850],
                    [47.5450, -122.2850],
                    [47.5450, -122.3050]
                ],
                population: '~7,100',
                supermarkets: '1 co-op, 1 chain',
                info: 'Improving access but gaps remain.',
                gap: 'Limited East African grocers.'
            },
            {
                name: 'Delridge',
                type: 'limited',
                status: 'Limited Access',
                coords: [
                    [47.5550, -122.3700],
                    [47.5550, -122.3450],
                    [47.5300, -122.3450],
                    [47.5300, -122.3700]
                ],
                population: '~14,200',
                supermarkets: '1 discount store',
                info: 'Topography limits walkability.',
                gap: 'Underserved Latino and Asian communities.'
            },
            {
                name: 'Greenwood/Phinney',
                type: 'adequate',
                status: 'Adequate Access',
                coords: [
                    [47.6950, -122.3600],
                    [47.6950, -122.3350],
                    [47.6750, -122.3350],
                    [47.6750, -122.3600]
                ],
                population: '~16,800',
                supermarkets: '3 stores',
                info: 'Well-served neighborhood.',
                gap: 'Limited ethnic specialty markets.'
            }
        ];

        const getColor = (t) => (
            t === 'high' ? 'rgba(220,53,69,0.65)' :
            t === 'limited' ? 'rgba(255,193,7,0.6)' :
            'rgba(40,167,69,0.45)'
        );

        const getBorderColor = (t) => (
            t === 'high' ? 'rgba(220,53,69,0.9)' :
            t === 'limited' ? 'rgba(255,193,7,0.9)' :
            'rgba(40,167,69,0.8)'
        );

        const getStatusClass = (t) => (
            t === 'high' ? 'status-high' :
            t === 'limited' ? 'status-limited' :
            'status-adequate'
        );

        neighborhoods.forEach(n => {
            const p = L.polygon(n.coords, {
                color: getBorderColor(n.type),
                fillColor: getColor(n.type),
                fillOpacity: 0.65,
                weight: 2.5
            }).addTo(map);

            p.bindPopup(`
                <h4 class="popup-header">${n.name}</h4>
                <span class="popup-status ${getStatusClass(n.type)}">${n.status}</span>
                <div class="popup-info"><strong>Population:</strong> ${n.population}<br>
                <strong>Supermarkets:</strong> ${n.supermarkets}</div>
                <div class="popup-info">${n.info}</div>
                <div class="popup-details"><strong>Cultural Access Gap:</strong><br>${n.gap}</div>
            `);

            p.on('mouseover', function () {
                this.setStyle({ weight: 3.5, fillOpacity: 0.8 });
            });

            p.on('mouseout', function () {
                this.setStyle({ weight: 2.5, fillOpacity: 0.65 });
            });
        });
    </script>
</body>
</html>
